(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{7460:function(e,t,a){Promise.resolve().then(a.bind(a,3905))},3905:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(7437),s=a(2265),n=a(6923),c=a(4086),l=a(9759);function d(){let{user:e}=(0,n.useAuth)(),[t,a]=(0,s.useState)([]),[d,u]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=(0,c.hJ)(l.db,"chat"),t=(0,c.cf)(e,e=>{let t=e.docs.map(e=>e.data());a(t)});return()=>t()},[]);let i=async()=>{if(""===d.trim())return;let t=(0,c.hJ)(l.db,"chat");await (0,c.ET)(t,{text:d,userId:e.uid,timestamp:(0,c.Bt)()}),u("")};return(0,r.jsx)(r.Fragment,{children:e?(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:t.map((t,a)=>{var s;return(0,r.jsxs)("div",{className:"p-2 rounded-lg mb-2 flex flex-col ".concat(t.userId===e.uid?"bg-blue-500 text-white self-end":"bg-gray-200 text-gray-700 self-start"),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-bold",children:null==e?void 0:e.displayName}),(0,r.jsx)("div",{className:"text-gray-400",children:new Date(null===(s=t.timestamp)||void 0===s?void 0:s.toDate()).toLocaleString()})]}),t.text]},a)})}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("textarea",{className:"flex-1 border rounded-lg p-2 mr-2 resize-none",value:d,onChange:e=>u(e.target.value),placeholder:"Type your message..."}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg",onClick:i,children:"Send"})]})})]}):(0,r.jsx)("div",{className:"text-center",children:"You must be logged in to be in chat"})})}},6923:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return d},useAuth:function(){return u}});var r=a(7437),s=a(2265),n=a(3085),c=a(9759);let l=(0,s.createContext)(),d=e=>{let{children:t}=e,[a,d]=(0,s.useState)(null),u=async()=>{try{let e=new n.hJ;await (0,n.rh)(c.I,e)}catch(e){console.log(e)}},i=async()=>{try{await (0,n.w7)(c.I)}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{let e=(0,n.Aj)(c.I,e=>{d(e)});return e},[a]),(0,r.jsx)(l.Provider,{value:{user:a,signInWithGoogle:u,logOut:i},children:t})},u=()=>(0,s.useContext)(l)},9759:function(e,t,a){"use strict";a.d(t,{I:function(){return d},db:function(){return l}});var r=a(994),s=a(4086),n=a(3085);let c=(0,r.ZF)({apiKey:"AIzaSyCg90GKTw3rsnekkNlwubneMKbL0eD-HI8",authDomain:"ssr-chat-ad10c.firebaseapp.com",projectId:"ssr-chat-ad10c",storageBucket:"ssr-chat-ad10c.appspot.com",messagingSenderId:"960439100989",appId:"1:960439100989:web:08d9b80716d862398dac54"}),l=(0,s.ad)(c),d=(0,n.v0)(c)}},function(e){e.O(0,[358,413,647,971,596,744],function(){return e(e.s=7460)}),_N_E=e.O()}]);